function go3DS(e,t){if(e){zPlaneShiftedObjs=e}if(t){inputParams=t}cloneContent()}function getStereoContainerWidth(){var e=$(window).width()/2;return e}function getLevelClass(e){var t="";var n=e.attr("class");var r=n.split(" ");var i=new RegExp(prefix+"level_","g");$.each(r,function(e,n){if(i.test(n)){t=n}});if(t){return t}else{return 0}}function buildObjParamArr(e,t,n,r,i){e.each(function(){if($(this).isCalculated()==false){function e(e,t,n,r,i,s,o){return{objID:e,objZID:t,objPseudo:n,initLvl:r,pseudoLvl:i,initML:s,initMR:o}}var s=parseInt($(this).css("margin-left"));var o=parseInt($(this).css("margin-right"));var u=$(this).getElementID();var a=e(t,u,n,r,i,s,o);stereoObjArr.push(a)}})}function cloneContent(){console.log("cloning is started");bodyBack=$("body").css("background");initContent=$("body").html();$("html").css({height:"100%"}).find("body").css({height:"100%"}).wrapInner("<div id='"+prefix+"original' class='"+prefix+"split_part' /></div>");$("body").getOriginalContainer().wrapInner("<div class='"+prefix+"container'>");var e=0;$("body").getOriginalContainer().find("."+prefix+"container *").each(function(){$(this).addClass(prefix+"elem_ID_"+e);e++});$("body").getOriginalContainer().clone().attr("id",prefix+"clone").appendTo("body");var e=0;$("body").getCloneContainer().find("."+prefix+"container *").each(function(){$(this).addClass(prefix+"elem_ID_"+e);e++});$("body").getCloneContainer().find("div [id]").each(function(){var e=$(this).attr("id");var t=e+prefix;$(this).attr("id",t)});var t=inputParams["method"];adjustSideBySide(t);console.log("cloning is complete");stylesAdaptation()}function adjustSideBySide(e){var t=$(window).width();var n=$(window).height();var r;if(e&&e=="top-to-bottom"){var i=n/4*-1;$("."+prefix+"split_part").css({width:"100%",height:n/2,position:"relative"});$("."+prefix+"container").css({width:"100%",height:n,position:"absolute",top:i,"-webkit-transform":"scaleY(0.5)","-webkit-transform":"scaleY(0.5)","-moz-transform":"scaleY(0.5)",transform:"scaleY(0.5)"})}else{$("."+prefix+"split_part").css({width:"50%",height:"100%","float":"left","background-size":"100% 100%","background-position":"center center","background-repeat":"no-repeat",overflow:"hidden",position:"relative"});$("."+prefix+"container").css({width:"50%",minHeight:n,"-webkit-transform":"scaleX(0.5)","-moz-transform":"scaleX(0.5)",transform:"scaleX(0.5)"});if($("body").getOriginalContainer().width()>$("body").getOriginalContainer().get(0).scrollWidth){r=$("body").getOriginalContainer().width()-$("body").getOriginalContainer().get(0).scrollWidth}else{r=0}var i=t/4*-1;$("."+prefix+"container").width(t).css({marginLeft:i-r});if($("body").getOriginalContainer().get(0).scrollHeight>$("body").getOriginalContainer().height()){$("body").getOriginalContainer().height($("body").getOriginalContainer().get(0).scrollHeight);$("body").getCloneContainer().height($("body").getCloneContainer().get(0).scrollHeight)}}$("body").getOriginalContainer().css({background:bodyBack});$("body").getCloneContainer().css({background:bodyBack});$(window).on({resize:function(){adjustSideBySide(e)}})}function stylesAdaptation(){var e=[];var t=window.location.href;console.log("adaptation is started");$("html").find("link[rel='stylesheet']").each(function(){var t=$(this).attr("href");e.push(t)});if(e!==""){$.each(e,function(e,t){$.ajaxSetup({cache:false});$.when($.get(t,"text")).done(function(e){var t=e.toString();buildCloneStylesheet(t)}).fail(function(){console.log("   error occured: "+t+" cannot be opened")})});console.log("adaptation is complete")}}function buildCloneStylesheet(e){e=e.toString();e=e.replace(/[\t]|[\r\n]/gm," ");var t=[];var n=new RegExp("}.[^}]*","gm");var r=e.match(n);var i;$.each(r,function(e,n){var r;var i;var s;var o=false;n=n.replace(/\}\s/,"").replace(/\/\*.*?\*\//,"").replace(/\s\s/,"")+"}";var u=n.replace(/\{.*\}/,"");var a=u.split(/,/);var f=n.replace(/^.[^{]*/,"");$.each(a,function(e,n){var i=/:hover/.test(n);var s=/#/.test(n);if(i==true||s==true){o=true}if(i==true){hoverElemIDs.push(n.replace(/:hover/,""));n=n.replace(/:hover/,".hover"+prefix)}if(s==true){n=n.replace(/^\s*/,"");var u=n.split(/\s/);$.each(u,function(e,t){if(/#/.test(t)){var r=new RegExp(t,"g");n=n.replace(r,t+prefix)}});if(/\.\.\//.test(f)){var a=document.location.href.replace(/#/,"").replace(/\w+\.html/,"");f=f.replace(/\.\.\//g,a+"/")}}if(o==true){r=n+f;t.push(r)}})});if(t!==null){$("<style type='text/css' />").html(t).prependTo($("body"))}buildMirroring()}function buildMirroring(){buildHoverBindings(hoverElemIDs);buildScrollBindings();buildCursor();buildZPlane()}function buildHoverBindings(e){$.each(e,function(e,t){t=t.replace(/:hover/,"");var n=$(""+t);n.each(function(){var e=$(this).getClone();$(this).on({mouseenter:function(){e.addClass("hover"+prefix)},mouseleave:function(){e.removeClass("hover"+prefix)}})})})}function buildScrollBindings(){$("body").getOriginalContainer().on({scroll:function(){var e=$(this).scrollTop();$("body").getCloneContainer().scrollTop(e)}})}function buildCursor(){$("body").getOriginalContainer().prepend("<div id='"+prefix+"cursor_original' class='"+prefix+"cursor'></div>");$("body").getCloneContainer().prepend("<div id='"+prefix+"cursor_clone' class='"+prefix+"cursor'></div>");$("."+prefix+"cursor").css({position:"absolute",width:"5px",height:"5px","border-radius":"256px",background:"red",top:0,left:0,zIndex:1e3,marginLeft:"5px",marginTop:"5px"});$("body").find("*").css({cursor:"none"});var e=0;$("body").getOriginalContainer().on({mousemove:function(t){var n=$(window).width();$("#"+prefix+"cursor_original").css({top:t.pageY+e,left:t.pageX});$("#"+prefix+"cursor_clone").css({top:t.pageY+e,left:t.pageX})},scroll:function(t){e=$(this).scrollTop()}});$("."+prefix+"cursor").on({mouseenter:function(){$(this).css({zIndex:0})},mouseleave:function(){$(this).css({zIndex:10})}})}function buildZPlane(){console.log("zPlane building is started ...");var e=$(window).width();zParams=zPlaneDefaultParams;if(inputParams){$.each(inputParams,function(e,t){if(zParams[e]!=t){zParams[e]=t}})}shiftLimit=Math.round(e/100*zParams["depthBudget"]/2);shiftStep=Math.round(shiftLimit/zParams["levels"]);shiftScale=zParams["visualCues"];shiftAnim=zParams["shiftAnim"];shiftMaxLvl=zParams["levels"];sAD=zParams["shiftAnimDuration"];initsSA=zParams["scaleAmount"];if(zPlaneShiftedObjs!==null){$.each(zPlaneShiftedObjs,function(e,t){var n=e;var r=n.split(/:/);var i=r[0];var s=r[1];var o=$("html").find(i);if(s){$.each(zPlaneShiftedObjs,function(e,t){if(e==i&&/:hover/.test(e)==false){initLvl=t}else{initLvl=0}});pseudoLvl=t}else{initLvl=t;pseudoLvl=0}buildObjParamArr(o,i,s,initLvl,pseudoLvl);zPlaneDisplace(o)})}}function zPlaneDisplace(e){var t;var n;var r;var i;var s;$.each(stereoObjArr,function(o,u){if(u["objZID"]==e.getElementID()){t=u["objPseudo"];n=u["initML"];r=u["initMR"];i=u["initLvl"];s=u["pseudoLvl"]}});if(t=="hover"){var o;var u;e.on({mouseenter:function(){o=$(this).css("z-index");u=$(this).parent().css("z-index");$(this).css({zIndex:1e3}).parent().css({zIndex:1e3});zPlaneShifter($(this),s,n,r)},mouseleave:function(){$(this).css({zIndex:o}).parent().css({zIndex:u});zPlaneShifter($(this),i,n,r)}})}else{e.each(function(){zPlaneShifter($(this),i,n,r)})}}function windowViolation(e,t){var n=$(window).width()/2;var r=e.offset();var i=r.left-t*shiftStep;if(zParams["visualCues"]==true){var s=1+initsSA*(t/shiftMaxLvl)/100;var o=e.width();var u=(o*s-o)/2;i=i-u}if(i<0){console.log("WARNING: "+e.attr("class")+" violated the window by "+i+"px");return true}else{return false}}function addLevelClass(e,t){e.getBoth().addClass(prefix+"level_"+t)}function removeLevelClass(e){var t=getLevelClass(e);e.getBoth().removeClass(t)}function zPlaneShifter(e,t,n,r){n=parseInt(n);r=parseInt(r);sSA=1+initsSA*(t/shiftMaxLvl)/100;var i=e.getClone();var s=windowViolation(e,t);if(shiftAnim==true){var o=e.css("-webkit-transition-property");var u=e.css("-webkit-transition-duration");e.css({"-webkit-transition-property":o+", margin, -webkit-transform","-webkit-transition-duration":u+", "+sAD+"s, "+sAD+"s","-moz-transition-property":o+", margin, -webkit-transform","-moz-transition-duration":u+", "+sAD+"s, "+sAD+"s","transition-property":o+", margin, -webkit-transform","transition-duration":u+", "+sAD+"s, "+sAD+"s"});i.css({"-webkit-transition-property":o+", margin, -webkit-transform","-webkit-transition-duration":u+", "+sAD+"s, "+sAD+"s","-moz-transition-property":o+", margin, -webkit-transform","-moz-transition-duration":u+", "+sAD+"s, "+sAD+"s","transition-property":o+", margin, -webkit-transform","transition-duration":u+", "+sAD+"s, "+sAD+"s"})}var a;var f;var l;var c;var h;var p;var d=e.width();var v=e.height();h=d*sSA-d;p=v*sSA-v;if(t>=0){a=n+t*shiftStep;f=r-t*shiftStep;l=n-t*shiftStep;c=r+t*shiftStep}else if(t<0){a=n-t*shiftStep;f=r+t*shiftStep;l=n+t*shiftStep;c=r-t*shiftStep}e.css({marginLeft:a,marginRight:f});i.css({marginLeft:l,marginRight:c});if(t==0){removeLevelClass(e,t)}else{addLevelClass(e,t)}if(shiftScale==true&&sSA!=0){e.css({"-webkit-transform":"scale("+sSA+")","-moz-transform":"scale("+sSA+")",transform:"scale("+sSA+")"});i.css({"-webkit-transform":"scale("+sSA+")","-moz-transform":"scale("+sSA+")",transform:"scale("+sSA+")"})}}var jsURLs=[];var zPlaneShiftedObjs=[];var inputParams=[];var prefix="_3dsjq_";var stereoObjArr=[];var hoverElemIDs=[];var initContent;var bodyBack;var zPlaneDefaultParams={method:"left-to-right",depthBudget:1.5,levels:5,visualCues:true,scaleAmount:10,shiftAnim:true,shiftAnimDuration:.25};var zParams;var shiftLimit;var shiftStep;var shiftScale;var shiftAnim;var shiftMaxLvl;var sAD;var initsSA;$.ajaxSetup({cache:false});(function(e){e.fn.extend({getOriginalContainer:function(){var e=this.find("#"+prefix+"original");if(e){return e}else{console.log("getOriginalContainer() failed to find original container within the specified parent.")}},getCloneContainer:function(){var e=this.find("#"+prefix+"clone");if(e){return e}else{console.log("getCloneContainer() failed to find clone container within the specified parent.")}},getCountClass:function(){var t="";this.each(function(){var n=e(this).attr("class");var r=n.split(" ");var i=new RegExp(prefix+"elem_ID_","g");e.each(r,function(e,n){if(i.test(n)){t=n}})});return t},getElementID:function(){var t;this.each(function(){t=e(this).getCountClass().replace(prefix+"elem_ID_","")});return t},getBoth:function(){var t;this.each(function(){t=e(this).getCountClass()});return e("."+t)},getClone:function(){var t;this.each(function(){outputClass=e(this).getCountClass()});return e("body").getCloneContainer().find("."+outputClass)},isCalculated:function(){var t=false;this.each(function(){var n=e(this).getElementID();e.each(stereoObjArr,function(e,r){if(r["objZID"]==n){t=true}})});return t},shift:function(t){this.each(function(){if(t!=undefined&&e(this).parents("#"+prefix+"original").length>0){var n=e(this).attr("class");var r=n.split(" ");var i=e("body").getOriginalContainer().attr("id");var s="#"+i+" ";e.each(r,function(e,t){s=s+"."+t});var o=e(""+s);buildObjParamArr(o,s,0,0,0);e.each(stereoObjArr,function(e,n){if(n["objZID"]==o.getElementID()){var r=n["initML"];var i=n["initMR"];zPlaneShifter(o,t,r,i)}})}});return this},getLevel:function(){var t;this.each(function(){var n=getLevelClass(e(this));var r=new RegExp(prefix+"level_","g");if(n!=0){t=parseInt(n.replace(r,""))}else{t=0}});return t}})})(jQuery)